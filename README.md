# ShareIt

Проект ShareIt — это сервис для обмена вещами (шеринга). Пользователи могут добавлять свои вещи, которые они готовы дать в аренду, а также находить и бронировать нужные им вещи у других.

Проект реализован на Java с использованием фреймворка Spring Boot.

![Картинка_проекта](image.png)

## Основная функциональность

*   **Управление пользователями:** Создание, просмотр, обновление и удаление профилей пользователей.
*   **Управление вещами:** Пользователи могут добавлять свои вещи, редактировать информацию о них и просматривать список своих вещей.
*   **Поиск вещей:** Доступен полнотекстовый поиск вещей по названию или описанию.
*   **Бронирование:** Пользователи могут бронировать доступные вещи на определённые даты. Владелец вещи может подтверждать или отклонять бронирования.
*   **Запросы на вещи:** Если пользователь не нашёл нужную вещь, он может создать запрос, который увидят другие пользователи и смогут добавить соответствующую вещь в ответ на этот запрос.
*   **Комментарии:** Пользователи, завершившие аренду вещи, могут оставлять к ней отзывы.

## Архитектура проекта

Изначально проект был разработан как монолитное приложение, но в процессе разработки был выполнен рефакторинг с переходом на **микросервисную архитектуру**. Это было сделано для повышения отказоустойчивости, масштабируемости и разделения ответственности.

Текущая архитектура состоит из трёх независимых модулей, собранных в многомодульный Maven-проект:

1.  **`shareit-gateway` (API Gateway):**
    *   Является единой точкой входа для всех клиентских запросов.
    *   Отвечает за **валидацию** входящих данных (DTO), отсекая некорре-ктные запросы до того, как они достигнут основной бизнес-логики.
    *   Перенаправляет валидные запросы на `shareit-server` с помощью `RestTemplate`.
    *   Запускается на порту `8080`.

2.  **`shareit-server` (Основной сервис):**
    *   Содержит всю **бизнес-логику** приложения.
    *   Взаимодействует с базой данных через **Spring Data JPA**.
    *   Реализует REST API для внутреннего взаимодействия с `gateway`.
    *   Запускается на порту `9090`.

3.  **`shareit-dto` (Общий модуль):**
    *   Содержит все **Data Transfer Objects (DTO)** и кастомные аннотации валидации.
    *   Выступает в роли "контракта" данных между `gateway` и `server`, обеспечивая их слабую связанность и устраняя дублирование кода.

## Стек технологий

*   **Язык:** Java 21
*   **Фреймворк:** Spring Boot 3
*   **Взаимодействие с БД:** Spring Data JPA, Hibernate
*   **База данных:** PostgreSQL (для основной работы), H2 (для интеграционных тестов)
*   **Сборка проекта:** Maven
*   **Веб:** Spring Web (MVC), REST API
*   **Тестирование:**
    *   JUnit 5
    *   Mockito
    *   Spring Test (MockMVC, `@SpringBootTest`, `@JsonTest`)
*   **Прочее:** Lombok, Jackson

## Тестирование

Проект имеет комплексное тестовое покрытие, демонстрирующее различные подходы к тестированию:
*   **Модульные тесты (`@JsonTest`):** Проверяют корректность сериализации и десериализации DTO.
*   **Интеграционные тесты (`@SpringBootTest`):** Тестируют взаимодействие сервисного слоя с базой данных, обеспечивая проверку корректности выполнения бизнес-логики и SQL-запросов.
*   **Тесты контроллеров (`@WebMvcTest`):** Проверяют слой REST-контроллеров в изоляции от бизнес-логики с использованием `MockMvc` и мокированием сервисов.

## Запуск проекта

Для запуска приложения необходимо:
1.  Установить и запустить СУБД PostgreSQL.
2.  Создать базу данных с именем `shareit`.
3.  Настроить подключение к БД в файле `shareit-server/src/main/resources/application.properties`.
4.  Последовательно запустить приложения:
    *   Сначала `ServerApplication.java` (запустится на порту 9090).
    *   Затем `GatewayApplication.java` (запустится на порту 8080).

После этого API будет доступно по адресу `http://localhost:8080`.
